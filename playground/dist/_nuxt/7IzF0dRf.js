import{C as E,r as w,k as m,u as K,o as G,M as J,H as Q,_ as W,a as r,c as d,n as g,t as M,m as f,d as N,e as X,O as Z,P as x,F as ee,b as te,p as ne,i as ae}from"./DNDMXCnN.js";import{f as oe,h as le}from"./BIGzIw_i.js";const se=E({inheritAttrs:!1,emits:["update:modelValue","enter","focus","suffix","event"],props:{modelValue:{default:"",type:[Number,String]},label:{type:String,default:null},hint:{type:String,default:null},type:{type:String,default:"text"},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},maxLength:{type:Number,default:null},prefix:{type:String,default:null},suffix:{type:Array,default:()=>[]},password:{type:Boolean,default:!1},minDate:{type:String,default:null},maxDate:{type:String,default:null},formatters:{type:String,default:""},mask:{type:String,default:null}},setup(e,{emit:o}){var O;const D=()=>e.password?"password":["range"].includes(e.type)?"text":e.type,I=((O=J().public.ui)==null?void 0:O.icon)=="tabler",v=I?"ti-eye":"hgi-view",t=I?"ti-eye-off":"hgi-view-off",k=Q(),V=w(null),c=w(e.modelValue),h=w(D()),y=w(e.suffix),b=w(!0);let S=null;const R=n=>{c.value=n.target.value},F=()=>{let l=c.value.toString().split("/").join("/").indexOf("_");l!==-1&&setTimeout(()=>{S.setSelectionRange(l,l)},1)},z=n=>{e.mask&&e.mask.split(":")[0]=="date"&&F()},A=n=>{S=n.target,o("focus",!0),e.mask&&F()},U=n=>{!k||k.isUnmounted||o("focus",!1)},H=n=>{if(n!=null&&n._toggle){const a=y.value.findIndex(l=>l._toggle);b.value=!b.value,y.value[a]={icon:b.value?v:t,_toggle:!0}}o("suffix",n)},B=n=>{const a=y.value;if(h.value=n?"password":e.type,b.value=n,n){a.findIndex(i=>i._toggle)==-1&&y.value.push({icon:v,_toggle:!0});return}y.value=a.filter(l=>!l._toggle)},Y=n=>{le(k,o,e,n,c.value,e.formatters.split("|"))},j=()=>{const n=e.mask.split(":");let a="y/m/d",l={y:"____",d:"__",m:"__"};if(n.length>1){let u=n[1];const s=u.includes("d"),p=u.includes("m"),P=u.includes("y");s&&p&&P&&(a=n[1])}return a.split("/").map(u=>l[u]).join("/")},_=(n,a)=>{const l=n.split("/"),i=a.split("/");let u=parseInt(l[i.indexOf("d")],10),s=parseInt(l[i.indexOf("m")],10);const p=parseInt(l[i.indexOf("y")],10);s=Math.min(Math.max(s,1),12);const P=new Date(p,s,0).getDate();return u=Math.min(Math.max(u,1),P),i.map(T=>{if(T==="d")return u.toString().padStart(2,"0");if(T==="m")return s.toString().padStart(2,"0");if(T==="y")return p.toString()}).join("/")},q=()=>{e.mask&&e.mask.split(":")[0]=="date"&&(c.value=j())},C=()=>{V.value&&setTimeout(()=>{V.value.focus()},10)};return m(()=>e.type,()=>{h.value=D()}),m(()=>e.password,n=>{B(n)}),m(()=>e.suffix,n=>{y.value=n,B(e.password)},{immediate:!0}),m(()=>e.modelValue,n=>{c.value=n}),m(()=>b.value,n=>{h.value=n?"password":"text"}),m(()=>c.value,n=>{if(e.mask){let a=j().split(""),l=K.numeric(n.toString()).toString(),i=0,u=l.length;for(let s=0;s<u;s++)a[s]==="/"&&u++;for(let s=0;s<a.length&&i<l.length;s++)a[s]==="_"&&(a[s]=l[i],i++);if(c.value=a.join(""),setTimeout(()=>{S==null||S.setSelectionRange(u,u)},5),!a.includes("_")){const s=e.mask.split(":");let p=s.length>1?s[1]:"y/m/d";o("update:modelValue",_(c.value,p))}return}oe(e.formatters.split("|"),o,n.toString(),e.type,a=>{o("update:modelValue",a)})}),m(()=>e.mask,()=>q()),m(()=>e.autofocus,()=>{e.autofocus&&C()}),G(()=>{B(e.password),q(),h.value=D(),e.autofocus&&C()}),{utils:K,localValue:c,inputType:h,inputSuffix:y,input:V,onInput:R,onFocus:A,onBlur:U,onMouseDown:z,onSuffix:H,onKeyPress:Y,doFocus:C,isTabler:I}}}),ue={class:"input-icon"},ie={key:0,class:"input-icon-addon"},re=["value","type","placeholder","maxlength","required","disabled","readonly","min","max","autofocus","icon"],de={key:2,class:"suffix"},ce=["onClick"],me={key:0},ye={key:3,class:"tooltip"};function pe(e,o,D,$,L,I){const v=ae;return r(),d("div",{class:g(["input",e.utils.on(e.disabled,"disabled")])},[e.label?(r(),d("label",{key:0,class:g(["form-label",e.utils.on(e.required,"required")])},M(e.label),3)):f("",!0),N("div",ue,[e.prefix?(r(),d("span",ie,[X(v,{icon:e.prefix,size:"input-prefix"},null,8,["icon"])])):f("",!0),["date"].includes(e.inputType)&&(e.localValue==""||e.localValue==null)?(r(),d("div",{key:1,class:g(["date-input-placeholders",e.utils.on(!["",null].includes(e.prefix),"has-prefix"),e.utils.on(e.disabled,"disabled")])}," ----/--/-- ",2)):f("",!0),N("input",{value:e.localValue,type:e.inputType,class:g(["form-control"]),placeholder:e.hint,maxlength:e.maxLength,required:e.required,disabled:e.disabled,readonly:"readonly"in e?e.readonly:Z(x),min:e.minDate,max:e.maxDate,autofocus:e.autofocus,name:"input",autocomplete:"off",onFocus:o[0]||(o[0]=(...t)=>e.onFocus&&e.onFocus(...t)),onBlur:o[1]||(o[1]=(...t)=>e.onBlur&&e.onBlur(...t)),onInput:o[2]||(o[2]=(...t)=>e.onInput&&e.onInput(...t)),onKeypress:o[3]||(o[3]=(...t)=>e.onKeyPress&&e.onKeyPress(...t)),onMousedown:o[4]||(o[4]=(...t)=>e.onMouseDown&&e.onMouseDown(...t)),ref:"input",icon:e.isTabler?"tabler":"huge"},null,40,re),e.inputSuffix.length!=0&&!["date"].includes(e.type)?(r(),d("div",de,[(r(!0),d(ee,null,te(e.inputSuffix,(t,k)=>(r(),d("span",{key:k,class:g(["suffix-item",e.utils.on(t.disabled,"disabled")]),onClick:V=>e.onSuffix(t)},[t!=null&&t.kbd&&(t!=null&&t.text)?(r(),d("kbd",me,M(t.text),1)):t!=null&&t.text?(r(),d("span",{key:1,class:g(t==null?void 0:t.class)},M(t.text),3)):t!=null&&t.icon&&!(t!=null&&t.text)?(r(),ne(v,{key:2,icon:t==null?void 0:t.icon},null,8,["icon"])):f("",!0),t.tooltip?(r(),d("span",ye,M(t.tooltip),1)):f("",!0)],10,ce))),128))])):f("",!0)])],2)}const ke=W(se,[["render",pe],["__scopeId","data-v-7ce86ba4"]]);export{ke as _};
