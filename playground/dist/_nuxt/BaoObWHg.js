import{r as i,o as B,_ as T,a as c,c as u,d as r,t as V,m as w,F as I,b as p,e as b,D as W,Q as L,j as Y,n as E,i as F}from"./DNDMXCnN.js";const U={setup(){const l=i([]),d=i(null),g=new Map,o=i(null),h=i(!1),v=i(!1),_=i(""),s=i(.6),t=i(null),y=e=>{const n=l.value.findIndex(a=>a.id===e.id);_.value=`Image ${n+1} of ${l.value.length}`},M=()=>{l.value.forEach(e=>{if(!g.has(e.src)){const n=new Image;n.src=e.src,n.onload=()=>g.set(e.src,!0)}})},k=e=>{d.value=e,o.value=e.id,y(e);const n=()=>{s.value=.3,setTimeout(()=>s.value=.6,150)};if(g.has(e.src)){h.value=!1,n();return}const a=new Image;a.src=e.src,a.complete?(h.value=!1,g.set(e.src,!0),n()):(h.value=!0,a.onload=()=>{h.value=!1,g.set(e.src,!0),n()})},A=e=>{const n=document.querySelector(".image-list");if(!n||!e)return;const a=n.clientWidth,f=e.clientWidth,m=e.offsetLeft-a/2+f/2;n.scrollTo({left:m,behavior:"smooth"})},N=(e,n)=>{const a=e.currentTarget;A(a),C(n)},C=(e,n)=>{if(s.value=.3,Array.isArray(e)&&(l.value=e.map((f,m)=>({src:f,id:`img-${m}`})),M()),!e||Array.isArray(e)&&e.length===0){console.error("No images provided to open viewer.");return}if(!Array.isArray(e)){v.value=!0,k(e);return}l.value=e.map((f,m)=>({src:f,id:`img-${m}`}));const a=n&&n<l.value.length?n:0;v.value=!0,k(l.value[a])},q=e=>{v.value=!1},D=e=>{const n=l.value.findIndex(m=>m.id===o.value);if(n===-1)return;const a=e==="arrow-left-01"?(n-1+l.value.length)%l.value.length:(n+1)%l.value.length,f=l.value[a];k(f),A(document.querySelector(`.image-list div:nth-child(${a+1})`))},x=e=>{e.preventDefault&&e.preventDefault(),e.deltaY<0?s.value=Math.min(s.value+.1,5):s.value=Math.max(s.value-.1,.3)},z=()=>{s.value=s.value<.6||s.value>=1?.6:1};return B(()=>{const e=document.querySelector(".image-list");e&&(e.addEventListener("wheel",n=>{n.preventDefault(),e.scrollLeft+=n.deltaY}),document.onkeydown=n=>{(n.key=="Escape"||n.key=="Esc")&&v.value&&(n.preventDefault(),v.value=!1),(n.key==="ArrowLeft"||n.key==="ArrowRight")&&(n.preventDefault(),D(n.key==="ArrowLeft"?"arrow-left-01":"arrow-right-01")),(n.key==="ArrowUp"||n.key==="ArrowDown")&&(n.preventDefault(),x({deltaY:n.key==="ArrowUp"?-100:100}))})}),{images:l,image:d,imageId:o,loading:h,show:v,info:_,viewerImg:t,scale:s,onImage:N,open:C,onAction:q,onControl:D,onWheel:x,onDblClick:z}}},j={class:"info"},P={key:0},Q={class:"actions"},R=["onClick"],G={key:0,class:"loader"},H=["src"],J={key:0,class:"controls"},K=["onClick"],O={class:"image-list"},X=["src","onClick"];function Z(l,d,g,o,h,v){var s;const _=F;return c(),u("div",{class:E(["image-viewer",{show:o.show}])},[r("div",j,[o.images.length>1?(c(),u("li",P,V(o.info),1)):w("",!0)]),r("div",Q,[(c(),u(I,null,p(["cancel-01"],t=>r("span",{key:t,onClick:y=>o.onAction(t)},[b(_,{icon:t},null,8,["icon"])],8,R)),64))]),r("div",{class:"image-preview",onWheel:d[1]||(d[1]=(...t)=>o.onWheel&&o.onWheel(...t))},[o.loading?(c(),u("div",G)):w("",!0),W(r("img",{ref:"viewerImg",src:(s=o.image)==null?void 0:s.src,style:Y({transform:"scale("+o.scale+")",transition:"transform 0.2s ease"}),draggable:"false",onDblclick:d[0]||(d[0]=(...t)=>o.onDblClick&&o.onDblClick(...t))},null,44,H),[[L,!!o.image]])],32),o.images.length>1?(c(),u("div",J,[r("ul",null,[(c(),u(I,null,p(["arrow-left-01","arrow-right-01"],t=>r("li",{key:t,onClick:y=>o.onControl(t)},[b(_,{icon:t},null,8,["icon"])],8,K)),64))])])):w("",!0),W(r("div",O,[(c(!0),u(I,null,p(o.images,t=>(c(),u("div",{key:t.id,class:E([{selected:o.imageId==t.id}])},[r("img",{src:t.src,class:"lazy-img",onClick:y=>o.onImage(y,t),draggable:"false"},null,8,X)],2))),128))],512),[[L,o.images.length>1]])],2)}const $=T(U,[["render",Z],["__scopeId","data-v-7303b894"]]);export{$ as _};
