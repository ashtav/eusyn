import{_ as I}from"./BHONfjjY.js";import{B,r as b,_ as z,a as r,c as m,n as _,t as g,m as p,p as C,w as k,d as s,F as x,b as S,e as f,i as N,v as q,x as F}from"./CUMUyx1W.js";import{_ as V}from"./Dla_9D5i.js";import"./Dmh1d8lx.js";import"./ByqAEy6H.js";const j={props:{label:{type:String,default:null},required:{type:Boolean,default:!1},accept:{type:String,default:"image:jpeg,jpg,png"},multiple:{type:Boolean,default:!1},config:{type:Object,default:{maxSize:3,width:[],height:[],label:null,hint:null,required:!1}},draggable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},max:{type:Number,default:10}},setup(){const u=B(),n=b([]),e=b(null),i=o=>{o.files.forEach((c,t)=>{if(c.type.includes("image")){const a="img_"+performance.now()+t,d={...c,key:a};n.value.push(d),setTimeout(()=>{const y=n.value.findIndex(w=>w.key===a);n.value[y].animate=!0},100*(t+1))}});let l=o.errors??[];if(l.length>0){const c=[...new Map(l.map(d=>[d.file,d])).values()].length,t=c==1?"file":"files",a=c==1?l[0].message:`${c} ${t} could not be retrieved. ${l[0].message}`;u.$toast.warning(a)}},h=(o,l,c)=>{if(o==="view"){const t=n.value.map(a=>a.data);v(t,t.indexOf(l.data))}else{if(n.value.length==1){n.value=n.value.filter(a=>a.key!==l.key);return}const t=n.value.findIndex(a=>a.key===l.key);n.value[t].animate=!1,setTimeout(()=>{n.value=n.value.filter(a=>a.key!==l.key)},10)}},v=(o,l)=>{e.value.open(o,l)};return{images:n,viewer:e,onSelect:i,onAction:h}}},A=u=>(q("data-v-4fb2fd09"),u=u(),F(),u),D=A(()=>s("div",null,[s("h4",{class:"mb-0"},"Select File or Drag Here"),s("p",{class:"m-0"},"You can either click to select a file or simply drag it into this area.")],-1)),E=[D],H={key:2,class:"image-preview"},M=["src"],O={class:"image-actions"},T=["onClick"],L={key:0,class:"add-image"},Y={key:1,class:"info d-flex align-items-center ps-2"},G=["title"],J={class:"m-0 text-secondary"};function K(u,n,e,i,h,v){const o=I,l=N,c=V;return r(),m("div",null,[e.label?(r(),m("div",{key:0,class:_(["form-label",{required:e.required}])},g(e.label),3)):p("",!0),i.images.length===0?(r(),C(o,{key:1,config:e.config,accept:e.accept,draggable:e.draggable,disabled:e.disabled,multiple:e.multiple,onSelect:i.onSelect},{default:k(({dragged:t})=>[s("div",{class:_(["file-handler",{dragged:t}])},E,2)]),_:1},8,["config","accept","draggable","disabled","multiple","onSelect"])):(r(),m("ul",H,[(r(!0),m(x,null,S(i.images,(t,a)=>(r(),m("li",{key:a,class:_({animate:t.animate,freeze:t.freeze})},[s("img",{src:t.data,draggable:"false"},null,8,M),s("div",O,[s("div",null,[(r(),m(x,null,S(["view","delete-02"],d=>s("span",{key:d,onClick:y=>i.onAction(d,t,a)},[f(l,{icon:`${d} fix`},null,8,["icon"])],8,T)),64))])])],2))),128)),i.images.length<e.max&&e.multiple?(r(),m("li",L,[f(o,{config:e.config,accept:e.accept,multiple:e.multiple,onSelect:i.onSelect},{default:k(()=>[s("div",null,[f(l,{icon:"plus-sign"})])]),_:1},8,["config","accept","multiple","onSelect"])])):p("",!0),!e.multiple&&i.images.length!=0?(r(),m("li",Y,[s("div",null,[s("h4",{class:"truncate-2",title:i.images[0].name},g(i.images[0].name),9,G),s("p",J,g(i.images[0].size),1)])])):p("",!0)])),f(c,{ref:"viewer"},null,512)])}const X=z(j,[["render",K],["__scopeId","data-v-4fb2fd09"]]);export{X as default};
