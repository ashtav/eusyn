import{K as j,r as M,E as q,o as G,k as J,_ as O,a as g,c as m,d as r,e as A,n as S,t as C,F as Y,b as x,i as P}from"./Bnil-BId.js";const Q={emits:["update:modelValue"],setup(D,{emit:a}){const d=j(),t=M("--/--/----"),w=M([]),c=M(d.$e.utils.now()),f=M(null),o=M(D.modelValue),i=M(!1),e=q(()=>{const n=d.$e.utils.dateFormat(c.value,"MMMM"),l=d.$e.utils.dateFormat(c.value,"Y");return{m:n,y:l}});function _(n){const l=new Date,[u,k]=n?n.split("-").map(Number):[l.getFullYear(),l.getMonth()+1],I=new Date(u,k-1,1),L=new Date(u,k,0).getDate(),V=I.getDay(),p=[];if(V>0){const s=new Date(u,k-2,1),h=new Date(s.getFullYear(),s.getMonth()+1,0).getDate();for(let v=h-V+1;v<=h;v++){const b=v.toString().padStart(2,"0"),K=(s.getMonth()+1).toString().padStart(2,"0");p.push({full:`${s.getFullYear()}-${K}-${b}`,display:b,out:!0})}}for(let s=1;s<=L;s++){const h=s.toString().padStart(2,"0"),v=k.toString().padStart(2,"0");p.push({full:`${u}-${v}-${h}`,display:h})}const z=42,W=new Date(u,k,1);for(let s=1;p.length<z;s++){const h=s.toString().padStart(2,"0"),v=(W.getMonth()+1).toString().padStart(2,"0");p.push({full:`${W.getFullYear()}-${v}-${h}`,display:h,out:!0})}const $=[];for(let s=0;s<p.length;s+=7)$.push(p.slice(s,s+7));return $}const F=n=>{f.value=null;const l=new Date(c.value);l.setMonth(l.getMonth()+(n!==0?1:-1)),c.value=d.$e.utils.dateFormat(l);const u=`${l.getFullYear()}-${(l.getMonth()+1).toString().padStart(2,"0")}`;w.value=_(u)},E=n=>{n.preventDefault(),n.deltaY<0?F(0):F(1)},N=()=>{const n=f.value;if(n!=null){const l=new Date(c.value);n==0?l.setMonth(l.getMonth()-1):l.setFullYear(l.getFullYear()+1),c.value=d.$e.utils.dateFormat(l),w.value=_(c.value)}},B=n=>{f.value=n},H=n=>{if(!n)return;const l=new Date(n),u=d.$e.utils.dateFormat(l,"Y-m-d");a("update:modelValue",u),o.value=u,f.value=null,i.value=!1};return G(()=>{w.value=_(),c.value=d.$e.utils.now("MMMM Y"),document.addEventListener("click",n=>{n.target.closest(".date-picker")||(i.value=!1)})}),J(()=>D.modelValue,n=>{}),{show:i,hint:t,calendar:w,date:e,focused:f,value:o,onChangeMonth:F,onWeel:E,onWheelHeader:N,focusAt:B,onSelect:H}},props:{modelValue:{type:String,default:()=>""},label:{type:String}}},R={class:"date-picker"},T=["placeholder","value"],U={class:"suffix"},X={class:"header"},Z=["onClick"],y=["title","onClick"];function tt(D,a,d,t,w,c){const f=P;return g(),m("div",R,[r("input",{class:"form-control",placeholder:t.hint,value:t.value,readonly:""},null,8,T),r("div",U,[r("span",{onClick:a[0]||(a[0]=o=>t.show=!t.show)},[A(f,{icon:"hgi-calendar-02"})])]),r("div",{class:S(["calendar",{show:t.show}])},[r("div",X,[r("h4",{class:"d-flex gap-1",onWheel:a[3]||(a[3]=(...o)=>t.onWheelHeader&&t.onWheelHeader(...o))},[r("span",{onClick:a[1]||(a[1]=o=>t.focusAt(0)),class:S({focused:t.focused==0,disabled:t.focused!=null})},C(t.date.m),3),r("span",{onClick:a[2]||(a[2]=o=>t.focusAt(1)),class:S({focused:t.focused==1,disabled:t.focused!=null})},C(t.date.y),3)],32),r("div",null,[(g(),m(Y,null,x(["up","down"],(o,i)=>r("span",{onClick:e=>t.onChangeMonth(i)},[A(f,{icon:`hgi-arrow-${o}-01`},null,8,["icon"])],8,Z)),64))])]),r("div",{class:S(["dates",{disabled:t.focused!=null}]),onWheel:a[4]||(a[4]=(...o)=>t.onWeel&&t.onWeel(...o)),onClick:a[5]||(a[5]=o=>t.focusAt(null))},[(g(),m(Y,null,x(["su","mo","tu","we","th","fr","sa"],(o,i)=>r("ul",{class:"week",key:i},[r("li",null,C(o),1)])),64)),(g(!0),m(Y,null,x(t.calendar,(o,i)=>(g(),m("ul",{key:i},[(g(!0),m(Y,null,x(o,(e,_)=>(g(),m("li",{key:_,title:(e==null?void 0:e.full)??"",class:S({today:(e==null?void 0:e.full)===D.$e.utils.now()||(e==null?void 0:e.full)==t.value,out:e==null?void 0:e.out}),onClick:F=>t.onSelect(e==null?void 0:e.full)},C((e==null?void 0:e.display)??""),11,y))),128))]))),128))],34)],2)])}const lt=O(Q,[["render",tt],["__scopeId","data-v-24f7d638"]]);export{lt as default};
