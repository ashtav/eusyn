import{r as k,o as V,H as i,T as E,M as A,I as F,_ as M,a as c,c as u,d as s,n as _,p as I,m as y,t as X,F as x,b as j,w as q,e as N,l as H,j as L,i as P}from"./Bnil-BId.js";import{_ as R}from"./CVvP8Hiz.js";const U={inheritAttrs:!1,emits:["init","onClose"],props:{id:{type:String,required:!0},size:{type:String,default:"md"},elevation:{type:Boolean,default:!0},icon:{type:String,default:null},actions:{type:Array,default:[]},headerless:{type:Boolean,default:!1}},setup(r,{emit:C}){var T;const e=k(!1),l=k(!1),b=k(!1),f=k(""),o=((T=A().public.ui)==null?void 0:T.icon)=="tabler"?"ti-x":"hgi-cancel-01";let a;const p=async n=>{var z,D;if(await F(),r.id==n.id){l.value=!0;const S=typeof(n==null?void 0:n.params)=="string";f.value=S?n==null?void 0:n.params:((z=n==null?void 0:n.params)==null?void 0:z.title)??"Untitled",a=S?null:((D=n==null?void 0:n.params)==null?void 0:D.callback)??null,setTimeout(()=>{var d;e.value=!0,C("init",{title:f.value,data:S?{}:(d=n==null?void 0:n.params)==null?void 0:d.data})},1),document.body.style.overflow="hidden",document.onkeydown=d=>{(d.key=="Escape"||d.key=="Esc"&&e.value)&&(d.preventDefault(),E.close(r.id))}}},w=n=>{b.value=n.show},h=n=>{n.id==r.id&&(e.value=!1,setTimeout(()=>{l.value=!1},250),document.onkeydown=()=>{},document.body.style.overflow="auto")},t=n=>{f.value=n.title},O=n=>{a==null||a.call(this,n.data)};return V(()=>{i.on("__show_modal",p),i.on("__show_modal2",p),i.on("__close_modal",h),i.on("__set_modal_title",t),i.on("__callback_modal",O),i.on("__show_confirm",w)}),{modal:E,preShow:l,show:e,title:f,onClose:h,iconX:o,isConfirmOpen:b}}},G={class:"modal-content"},J={class:"modal-title text-truncate"},K={class:"modal-action"},Q=["icon-tooltip"],W=["icon-tooltip","onClick"];function Y(r,C,e,l,b,f){const v=P,B=R;return c(),u(x,null,[s("div",{class:_(["modal fade",{show:l.show&&!l.isConfirmOpen}]),tabindex:"-1",style:L({display:l.preShow?"block":"none"})},[s("div",{class:_(["modal-dialog modal-dialog-centered",`modal-${e.size}`]),role:"document"},[s("div",G,[e.headerless?y("",!0):(c(),u("div",{key:0,class:_(["modal-header bg-white",{"border-0":!e.elevation}])},[e.icon?(c(),I(v,{key:0,icon:`${e.icon} fix-1 me-2`},null,8,["icon"])):y("",!0),s("h5",J,X(l.title),1),s("div",K,[s("ul",null,[(c(!0),u(x,null,j([...e.actions,{icon:l.iconX,type:"close"}],(o,a)=>{var p,w;return c(),u(x,null,[((p=o==null?void 0:o.options)==null?void 0:p.length)>0&&((o==null?void 0:o.visible)??!0)?(c(),I(B,{key:a,placement:"end",options:o==null?void 0:o.options,onSelect:h=>{var t;return(t=o==null?void 0:o.click)==null?void 0:t.call(null,{...h,index:a})}},{default:q(()=>[s("li",{"icon-tooltip":o==null?void 0:o.tooltip,class:_([o!=null&&o.disabled?"disabled opacity-50":""])},[N(v,{icon:o==null?void 0:o.icon},null,8,["icon"])],10,Q)]),_:2},1032,["options","onSelect"])):y("",!0),((o==null?void 0:o.visible)??!0)&&!((w=o==null?void 0:o.options)!=null&&w.length)?(c(),u("li",{key:a,"icon-tooltip":o==null?void 0:o.tooltip,class:_([o!=null&&o.disabled?"disabled opacity-50":""]),onClick:h=>{var t;return(o==null?void 0:o.type)=="close"?l.modal.close(e.id):(t=o==null?void 0:o.click)==null?void 0:t.call(null,{...o,index:a})}},[N(v,{icon:o==null?void 0:o.icon},null,8,["icon"])],10,W)):y("",!0)],64)}),256))])])],2)),H(r.$slots,"default",{},void 0,!0)])],2)],6),l.preShow?(c(),u("div",{key:0,class:_(["modal-backdrop fade",{show:l.show&&!l.isConfirmOpen}])},null,2)):y("",!0)],64)}const g=M(U,[["render",Y],["__scopeId","data-v-6de23ec0"]]);export{g as _};
