import{C as P,r as v,k as q,o as z,u as U,A as j,H as G,_ as J,a as r,c,n as S,t as I,m as k,d as g,e as A,p as Q,F,b as O,i as R}from"./DNDMXCnN.js";import{t as y}from"./CczvJgXj.js";const W=P({inheritAttrs:!1,emits:["update:modelValue","enter","change","focus"],props:{modelValue:{default:"",type:[Number,String,Array]},label:{type:String,default:null},hint:{type:String,default:null},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},prefix:{type:String,default:null},suffix:{type:String,default:null},options:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!1}},setup(e,{emit:n,attrs:$}){const C=G(),d=v(e.multiple?"":e.modelValue),m=v(e.options),a=v(null),u=v(!1),t=v(!1),p=v(null),h=v(null),f=v(-1),i=v(Array.isArray(e.modelValue)?e.modelValue:[]),B=async l=>{var s,b;await j();const o=l!=null?(s=h.value)==null?void 0:s.querySelectorAll("li")[l]:(b=h.value)==null?void 0:b.querySelector("li.selected");o&&h.value&&(h.value.scrollTop=o.offsetTop-h.value.clientHeight/2+o.clientHeight/2)},N=l=>{d.value=l.target.value.toLowerCase(),m.value=e.options.filter(o=>{const s=y(o).toLowerCase().includes(d.value);return e.multiple?s&&!i.value.includes(o):s}),t.value||(t.value=!0)},E=l=>{t.value=!0,n("focus",!0),B();const o=e.options.findIndex(s=>s===a.value);f.value=o===-1?-1:o,e.multiple&&(m.value=e.options.filter(s=>!i.value.includes(s)))},L=()=>{d.value=y(a.value),n("focus",!1),setTimeout(()=>{t.value=!1,f.value=-1,e.multiple||(m.value=e.options)},1)},V=l=>{if(e.multiple){i.value.findIndex(o=>o==l)==-1&&(i.value.push(l),n("change",i.value));return}d.value=y(l),a.value=l,n("update:modelValue",y(l,!0)),n("change",l)},K=l=>{i.value.splice(l,1),n("update:modelValue",i.value),n("change",i.value)},D=()=>{i.value=[],n("update:modelValue",i.value),n("change",i.value)},H=l=>{var o,s;if(l.keyCode==13&&((s=(o=C==null?void 0:C.vnode)==null?void 0:o.props)!=null&&s.onEnter)){const b=m.value;setTimeout(()=>{d.value!=y(a.value)&&b.length!=0&&d.value!=""&&(V(b[0]),p.value.blur())},10),n("enter",d.value),t.value=!1}},M=()=>{if(!a.value)return p.value.focus();a.value=null,d.value="",n("update:modelValue",""),n("change",null)},w=()=>{setTimeout(()=>{if(e.multiple&&Array.isArray(e.modelValue)){i.value=e.modelValue;return}const l=e.modelValue,o=e.options.find(s=>`${y(s,!0)}`.toLowerCase()==`${l}`.toLowerCase());if(o){a.value=o,d.value=y(o);return}a.value=null,d.value=""},10)},T=()=>{e.autofocus&&p.value&&setTimeout(()=>{p.value.focus()},10)};return q(()=>e.modelValue,l=>{w()}),q(()=>e.options,l=>{m.value=l,w()}),z(()=>{w(),T(),document.addEventListener("keydown",l=>{if(!t.value)return;const o=m.value;o.length&&((l.key==="ArrowDown"||l.key==="ArrowUp")&&(f.value=l.key==="ArrowDown"?f.value+1>=o.length?0:f.value+1:f.value-1<0?o.length-1:f.value-1,B(f.value)),l.key==="Enter"&&f.value>=0&&(f.value!=-1&&V(o[f.value]),L(),p.value.blur()))})}),{utils:U,labelInput:d,localOptions:m,selected:a,isFocus:t,refSelect:p,refOption:h,isLoading:u,values:i,indexToSelect:f,onInput:N,onFocus:E,onBlur:L,onSelect:V,onKeyPress:H,onSuffix:M,textOption:y,doFocus:T,setLoading:l=>{u.value=l},removeItem:K,onClean:D}}}),X={class:"input-icon"},Y={key:0,class:"input-icon-addon"},Z=["value","placeholder","required","disabled","autofocus"],_={class:"suffix"},x={key:0,class:"spinner-border spinner-border-sm"},ee={key:1,class:"options"},le={ref:"refOption"},ne=["onMousedown"],oe={key:0,class:"text-muted pe-none"},ue={key:1,class:"multiple"},ae={class:"me-2"};function te(e,n,$,C,d,m){const a=R;return r(),c("div",{class:S(["select",e.utils.on(e.disabled||e.isLoading,"disabled")])},[e.label?(r(),c("label",{key:0,class:S(["form-label",e.utils.on(e.required,"required")])},I(e.label),3)):k("",!0),g("div",X,[e.prefix?(r(),c("span",Y,[A(a,{icon:e.prefix,size:"input-prefix"},null,8,["icon"])])):k("",!0),g("input",{ref:"refSelect",value:e.labelInput,class:S(["form-control",e.utils.on(e.isFocus,"has-focus")]),placeholder:e.hint,maxlength:255,required:e.required,disabled:e.disabled||e.isLoading,autofocus:e.autofocus,name:"select",autocomplete:"off",onInput:n[0]||(n[0]=(...u)=>e.onInput&&e.onInput(...u)),onFocus:n[1]||(n[1]=(...u)=>e.onFocus&&e.onFocus(...u)),onBlur:n[2]||(n[2]=(...u)=>e.onBlur&&e.onBlur(...u)),onKeypress:n[3]||(n[3]=(...u)=>e.onKeyPress&&e.onKeyPress(...u))},null,42,Z),g("div",_,[e.values.length>0?(r(),c("span",{key:0,onClick:n[4]||(n[4]=(...u)=>e.onClean&&e.onClean(...u)),tooltip:"Clear"},[A(a,{icon:"delete-02"})])):k("",!0),g("span",{onClick:n[5]||(n[5]=(...u)=>e.onSuffix&&e.onSuffix(...u))},[e.isLoading?(r(),c("i",x)):(r(),Q(a,{key:1,icon:e.selected?"hgi-cancel-01":e.suffix??"hgi-arrow-down-01"},null,8,["icon"]))])]),e.isFocus?(r(),c("div",ee,[g("ul",le,[(r(!0),c(F,null,O(e.localOptions,(u,t)=>(r(),c("li",{key:t,class:S({selected:u==e.selected,hovered:e.indexToSelect==t}),onMousedown:p=>e.onSelect(u)},[g("span",null,I(e.textOption(u)),1)],42,ne))),128)),e.localOptions.length==0?(r(),c("li",oe," Not found. ")):k("",!0)],512)])):k("",!0)]),e.multiple?(r(),c("ul",ue,[(r(!0),c(F,null,O(e.values,(u,t)=>(r(),c("li",{key:t},[g("span",ae,I(e.textOption(u)),1),A(a,{icon:"cancel-01 fix",onClick:p=>e.removeItem(t)},null,8,["onClick"])]))),128))])):k("",!0)],2)}const fe=J(W,[["render",te],["__scopeId","data-v-0fd31996"]]);export{fe as _};
