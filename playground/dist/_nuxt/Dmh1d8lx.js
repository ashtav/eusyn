import{C as A,r as h,k as y,u as T,o as R,I as U,_,a as r,c as m,n as v,t as I,m as k,d as j,e as Q,P as Y,Q as E,F as G,b as H,p as J,i as W}from"./CUMUyx1W.js";import{f as X,h as Z}from"./ByqAEy6H.js";const x=A({inheritAttrs:!1,emits:["update:modelValue","enter","focus","suffix","event"],props:{modelValue:{default:"",type:[Number,String]},label:{type:String,default:null},hint:{type:String,default:null},type:{type:String,default:"text"},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},maxLength:{type:Number,default:null},prefix:{type:String,default:null},suffix:{type:Array,default:()=>[]},password:{type:Boolean,default:!1},minDate:{type:String,default:null},maxDate:{type:String,default:null},formatters:{type:String,default:""},mask:{type:String,default:null}},setup(e,{emit:l}){const S=()=>e.password?"password":["range"].includes(e.type)?"text":e.type,b=U(),w=h(null),d=h(e.modelValue),c=h(S()),t=h(e.suffix),p=h(!0);let g=null;const q=n=>{d.value=n.target.value},P=()=>{let o=d.value.toString().split("/").join("/").indexOf("_");o!==-1&&setTimeout(()=>{g.setSelectionRange(o,o)},1)},K=n=>{e.mask&&e.mask.split(":")[0]=="date"&&P()},N=n=>{g=n.target,l("focus",!0),e.mask&&P()},$=n=>{!b||b.isUnmounted||l("focus",!1)},O=n=>{if(n!=null&&n._toggle){const a=t.value.findIndex(o=>o._toggle);p.value=!p.value,t.value[a]={icon:p.value?"hgi-view":"hgi-view-off",_toggle:!0}}l("suffix",n)},D=n=>{const a=t.value;if(c.value=n?"password":e.type,p.value=n,n){a.findIndex(i=>i._toggle)==-1&&t.value.push({icon:"hgi-view",_toggle:!0});return}t.value=a.filter(o=>!o._toggle)},L=n=>{Z(b,l,e,n,d.value,e.formatters.split("|"))},C=()=>{const n=e.mask.split(":");let a="y/m/d",o={y:"____",d:"__",m:"__"};if(n.length>1){let u=n[1];const s=u.includes("d"),f=u.includes("m"),B=u.includes("y");s&&f&&B&&(a=n[1])}return a.split("/").map(u=>o[u]).join("/")},z=(n,a)=>{const o=n.split("/"),i=a.split("/");let u=parseInt(o[i.indexOf("d")],10),s=parseInt(o[i.indexOf("m")],10);const f=parseInt(o[i.indexOf("y")],10);s=Math.min(Math.max(s,1),12);const B=new Date(f,s,0).getDate();return u=Math.min(Math.max(u,1),B),i.map(M=>{if(M==="d")return u.toString().padStart(2,"0");if(M==="m")return s.toString().padStart(2,"0");if(M==="y")return f.toString()}).join("/")},F=()=>{e.mask&&e.mask.split(":")[0]=="date"&&(d.value=C())},V=()=>{w.value&&setTimeout(()=>{var n;(n=w.value)==null||n.focus()},10)};return y(()=>e.type,()=>{c.value=S()}),y(()=>e.password,n=>{D(n)}),y(()=>e.suffix,n=>{t.value=n,D(e.password)},{immediate:!0}),y(()=>e.modelValue,n=>{d.value=n}),y(()=>p.value,n=>{c.value=n?"password":"text"}),y(()=>d.value,n=>{if(e.mask){let a=C().split(""),o=T.numeric(n.toString()).toString(),i=0,u=o.length;for(let s=0;s<u;s++)a[s]==="/"&&u++;for(let s=0;s<a.length&&i<o.length;s++)a[s]==="_"&&(a[s]=o[i],i++);if(d.value=a.join(""),setTimeout(()=>{g==null||g.setSelectionRange(u,u)},5),!a.includes("_")){const s=e.mask.split(":");let f=s.length>1?s[1]:"y/m/d";l("update:modelValue",z(d.value,f))}return}X(e.formatters.split("|"),l,n.toString(),e.type,a=>{l("update:modelValue",a)})}),y(()=>e.mask,()=>F()),y(()=>e.autofocus,()=>{e.autofocus&&V()}),R(()=>{D(e.password),F(),c.value=S(),e.autofocus&&V()}),{utils:T,localValue:d,inputType:c,inputSuffix:t,input:w,onInput:q,onFocus:N,onBlur:$,onMouseDown:K,onSuffix:O,onKeyPress:L,doFocus:V}}}),ee={class:"input-icon"},te={key:0,class:"input-icon-addon"},ne=["value","type","placeholder","maxlength","required","disabled","readonly","min","max","autofocus"],ae={key:2,class:"suffix"},le=["onClick"],oe={key:0},se={key:3,class:"tooltip"};function ue(e,l,S,b,w,d){const c=W;return r(),m("div",{class:v(["input",e.utils.on(e.disabled,"disabled")])},[e.label?(r(),m("label",{key:0,class:v(["form-label",e.utils.on(e.required,"required")])},I(e.label),3)):k("",!0),j("div",ee,[e.prefix?(r(),m("span",te,[Q(c,{icon:e.prefix,size:"input-prefix"},null,8,["icon"])])):k("",!0),["date"].includes(e.inputType)&&(e.localValue==""||e.localValue==null)?(r(),m("div",{key:1,class:v(["date-input-placeholders",e.utils.on(!["",null].includes(e.prefix),"has-prefix"),e.utils.on(e.disabled,"disabled")])}," ----/--/-- ",2)):k("",!0),j("input",{value:e.localValue,type:e.inputType,class:v(["form-control"]),placeholder:e.hint,maxlength:e.maxLength,required:e.required,disabled:e.disabled,readonly:"readonly"in e?e.readonly:Y(E),min:e.minDate,max:e.maxDate,autofocus:e.autofocus,name:"input",autocomplete:"off",onFocus:l[0]||(l[0]=(...t)=>e.onFocus&&e.onFocus(...t)),onBlur:l[1]||(l[1]=(...t)=>e.onBlur&&e.onBlur(...t)),onInput:l[2]||(l[2]=(...t)=>e.onInput&&e.onInput(...t)),onKeypress:l[3]||(l[3]=(...t)=>e.onKeyPress&&e.onKeyPress(...t)),onMousedown:l[4]||(l[4]=(...t)=>e.onMouseDown&&e.onMouseDown(...t)),ref:"input"},null,40,ne),e.inputSuffix.length!=0&&!["date"].includes(e.type)?(r(),m("div",ae,[(r(!0),m(G,null,H(e.inputSuffix,(t,p)=>(r(),m("span",{key:p,class:v(["suffix-item",e.utils.on(t.disabled,"disabled")]),onClick:g=>e.onSuffix(t)},[t!=null&&t.kbd&&(t!=null&&t.text)?(r(),m("kbd",oe,I(t.text),1)):t!=null&&t.text?(r(),m("span",{key:1,class:v(t==null?void 0:t.class)},I(t.text),3)):t!=null&&t.icon&&!(t!=null&&t.text)?(r(),J(c,{key:2,icon:t==null?void 0:t.icon},null,8,["icon"])):k("",!0),t.tooltip?(r(),m("span",se,I(t.tooltip),1)):k("",!0)],10,le))),128))])):k("",!0)])],2)}const me=_(x,[["render",ue],["__scopeId","data-v-46fa1954"]]);export{me as _};
