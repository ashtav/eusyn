import{_ as J}from"./sdzyUGVC.js";import{r as N,q as Q,h as T,H as R,_ as M,o as r,c,a as s,b,w as O,A as U,F as C,s as D,u as q,d as S,t as B,y as L,z as x,B as W,x as z,C as X}from"./UsF_q1Ol.js";import{_ as Y}from"./MKiNSgRh.js";import{_ as Z}from"./CCHBahdj.js";import{_ as $}from"./BzrfsdAe.js";const tt={props:{columns:{type:Array,default:()=>[]},rows:{type:Object,default:()=>[]},pagination:{type:Object,default:{client:!1,meta:{},length:5,paginate:t=>{}}},entries:{type:Object,default:{entries:[5,15,25,50,100],entry:t=>{}}},config:{type:Object,default:{emptyMessage:"No data found.",loadingNumber:3}},loading:{type:Boolean,default:()=>!1},maxHeight:{type:String}},setup(t,{}){var j,E;let g=[];const u=N(n=>[]),e=N((n,a)=>{}),h=N(t.columns),m=N([]),v=N(((j=t.entries)==null?void 0:j.entries)??[5,15,25,50,100]),p=N(v.value.length==0?"-":v.value[0]),w=N((E=t.pagination)==null?void 0:E.meta);let _="",i=null,y=N(1);const A=n=>n.key?n.key:n.label.toLowerCase().replaceAll(" ","_"),P=(n,a)=>n.sort((o,l)=>{const d=typeof o[a]=="string"&&!isNaN(Number(o[a]))?Number(o[a]):o[a],f=typeof l[a]=="string"&&!isNaN(Number(l[a]))?Number(l[a]):l[a];return d<f?-1:d>f?1:0}),H=(n,a)=>n.sort((o,l)=>{const d=typeof o[a]=="string"&&!isNaN(Number(o[a]))?Number(o[a]):o[a],f=typeof l[a]=="string"&&!isNaN(Number(l[a]))?Number(l[a]):l[a];return d<f?1:d>f?-1:0}),I=t.columns.map(n=>A(n)),K=n=>{var a;if(n!=null&&n.sortable){let o=A(n);i!=o&&(_=""),i=o,h.value.forEach(k=>{k.sort_icon="ti-arrows-sort"});const l=h.value.findIndex(k=>A(k)==o),d=h.value[l],f=Array.isArray(t.rows)?t.rows:((a=t.rows)==null?void 0:a.data)??[];_==""?(m.value=P(f,o),_="asc",d.sort_icon="ti-sort-ascending"):_=="asc"?(m.value=H(f,o),_="desc",d.sort_icon="ti-sort-descending"):(m.value=g,_="",d.sort_icon="ti-arrows-sort")}},V=n=>{var a;y.value=1,p.value=n,(a=t.entries)==null||a.entry(n)},F=()=>{let n=w.value.last_page,a=t.pagination.length??5;const o=Math.floor(a/2);let l=y.value-o,d=y.value+o;l<1&&(l=1,d=Math.min(n,a)),d>n&&(d=n,l=Math.max(1,n-a+1));const f=[];for(let k=l;k<=d;k++)f.push(k);return f},G=n=>{var a,o;n<0||n>((a=w.value)==null?void 0:a.last_page)||(y.value=n,(o=t.pagination)==null||o.paginate(n))};return Q(()=>{var a;const n=(Array.isArray(t.rows)?t.rows:((a=t.rows)==null?void 0:a.data)??[]).map(o=>({...o}));g=n,m.value=n,Array.isArray(t.rows)||(u.value=t.rows.options?t.rows.options:o=>[],e.value=t.rows.actions?t.rows.actions:(o,l)=>{}),h.value=t.columns.map(o=>({...o,sort_icon:"ti-arrows-sort"}))}),T(()=>t.rows,n=>{var o;const a=(Array.isArray(t.rows)?t.rows:((o=t.rows)==null?void 0:o.data)??[]).map(l=>({...l}));g=a,m.value=a,Array.isArray(t.rows)||(u.value=t.rows.options,e.value=t.rows.actions)},{deep:!0}),T(()=>t.pagination,n=>{w.value=n.meta},{deep:!0}),{utils:R,keys:I,headers:h,dataTable:m,doSortBy:K,entries:v,onEntries:V,meta:w,entry:p,active:y,onNavigate:G,pageNumber:F,rowOptions:u,rowActions:e}}},et={class:"card"},at={class:"card-body border-bottom py-3"},nt={class:"d-flex"},ot={class:"ms-auto text-secondary d-flex align-items-center"},st={class:"table card-table table-vcenter text-nowrap table-striped"},rt=["onClick"],it={key:0},lt={key:1},ct=["colspan"],dt={key:0,class:"w-1"},ut={key:0,class:"card-footer d-flex align-items-center py-2 border-0"},mt={class:"m-0 text-secondary d-none d-lg-block"},_t={class:"pagination m-0 ms-auto"},gt=["onClick"];function ht(t,g,u,e,h,m){const v=z,p=Y,w=X,_=Z;return r(),c("div",et,[s("div",at,[s("div",nt,[b(p,{options:e.entries,size:"sm",onSelect:e.onEntries},{default:O(()=>[b(v,{label:`Show: ${e.entry}`,theme:"btn-white py-2",icon:"adjustments-alt"},null,8,["label"])]),_:1},8,["options","onSelect"]),s("div",ot,[U(t.$slots,"actions",{},void 0,!0)])])]),s("div",{class:"custom-table",style:W({maxHeight:u.maxHeight})},[s("table",st,[s("thead",null,[s("tr",null,[(r(!0),c(C,null,D(e.headers,i=>(r(),c("th",null,[s("span",{class:q({hoverable:i.sortable}),onClick:y=>e.doSortBy(i)},[S(B(i.label)+" ",1),i.sortable?(r(),L(w,{key:0,icon:i.sort_icon??"",size:"xs"},null,8,["icon"])):x("",!0)],10,rt)]))),256)),e.rowOptions?(r(),c("th",it)):x("",!0)])]),s("tbody",null,[u.loading?(r(!0),c(C,{key:0},D(e.utils.randInt(1,u.config.loadingNumber),i=>(r(),c("tr",null,[(r(!0),c(C,null,D([...e.headers,{label:""}],y=>(r(),c("td",null,[y.label!=""?(r(),L(_,{key:0,size:[["50%","100%"]]})):x("",!0)]))),256))]))),256)):x("",!0),!u.loading&&e.dataTable.length==0?(r(),c("tr",lt,[s("td",{colspan:[...e.headers,{label:""}].length},B(u.config.emptyMessage??"No data found."),9,ct)])):x("",!0),!u.loading&&e.dataTable.length!=0?(r(!0),c(C,{key:2},D(e.dataTable,(i,y)=>(r(),c("tr",null,[(r(!0),c(C,null,D(e.keys,(A,P)=>(r(),c("td",null,B(i[A]),1))),256)),e.rowOptions?(r(),c("td",dt,[b(p,{options:e.rowOptions(i)??[],onSelect:A=>e.rowActions?e.rowActions(A,i):null,placement:"end"},{default:O(()=>[b(v,{icon:"settings",theme:"white p-2"})]),_:2},1032,["options","onSelect"])])):x("",!0)]))),256)):x("",!0)])])],4),e.meta&&Object.keys(e.meta).length!=0&&e.meta.total!=0&&!u.loading&&e.dataTable.length!=0?(r(),c("div",ut,[s("p",mt,[s("span",null,B(e.meta.from),1),S(" to "),s("span",null,B(e.meta.to),1),S(" of "),s("span",null,B(e.meta.total),1),S(" entries")]),s("ul",_t,[s("li",{class:q(["page-item me-1",e.utils.on(e.active<=1,"disabled")])},[s("a",{class:"page-link",href:"#",tabindex:"-1","aria-disabled":"true",onClick:g[0]||(g[0]=i=>e.onNavigate(e.active-1))}," Prev ")],2),(r(!0),c(C,null,D(e.pageNumber(),i=>(r(),c("li",{class:q(["page-item",e.utils.on(i==e.active,"active")])},[s("a",{class:"page-link",href:"javascript:void(0)",onClick:y=>e.onNavigate(i)},B(i),9,gt)],2))),256)),s("li",{class:q(["page-item ms-1",e.utils.on(e.active>=e.meta.last_page,"disabled")])},[s("a",{class:"page-link",href:"#",onClick:g[1]||(g[1]=i=>e.onNavigate(e.active+1))}," Next ")],2)])])):x("",!0)])}const ft=M(tt,[["render",ht],["__scopeId","data-v-8792d5ee"]]),yt={setup(){return{}},computed:{},data(){return{query:{page:1,per_page:5},isLoading:!0,data:[],meta:{},table:{columns:[{label:"Name",sortable:!0},{label:"Description",sortable:!0},{label:"Price",sortable:!0},{label:"Stock",sortable:!0}]}}},methods:{getData(){this.isLoading=!0,$fetch("https://api.igsa.pw/api/dummy",{query:this.query}).then(t=>{this.isLoading=!1,this.data=t.data??[],this.meta=t.meta??{}})},onEntry(t){this.query.per_page!=t&&(this.query.page=1,this.query.per_page=t,this.getData())},onPaginate(t){this.query.page!=t&&(this.query.page=t,this.getData())},options(t){return Number(t.stock)<20?["Details","-","Edit","Delete"]:["Details"]},actions(t,g){console.log(t,g)}},mounted(){this.getData()}},bt=s("br",null,null,-1);function vt(t,g,u,e,h,m){const v=J,p=z,w=ft,_=$;return r(),c("div",null,[b(v,{title:"Product",actions:[{label:"Create New",icon:"ti-plus"}]}),b(w,{columns:h.table.columns,rows:{data:h.data,options:m.options,actions:m.actions},pagination:{meta:h.meta,paginate:m.onPaginate},entries:{entry:m.onEntry},loading:h.isLoading,maxHeight:"350px"},{actions:O(()=>[s("div",null,[b(p,{icon:"layout",theme:"white"})])]),_:1},8,["columns","rows","pagination","entries","loading"]),S(),bt,b(_,{code:'<Table :columns="table.columns" :rows="{ data: data, options: options, actions: actions }" :pagination="{ meta: meta, paginate: onPaginate }" :entries="{ entry: onEntry }" :loading="isLoading" />'}),b(_,{class:"mt-2",code:`// meta\r
const meta = { "current_page": 1, "from": 1, "to": 5, "total": 30, "last_page": 6, "per_page": 5 }`}),b(_,{class:"mt-2",code:`// onPaginate\r
onPaginate(page: number): any { }`})])}const kt=M(yt,[["render",vt]]);export{kt as default};
