import{O as v,A as W,r as B,w as D,u as _,o as Y,G as H,B as J,_ as X,a as h,c as C,n as V,t as O,j as M,d as R,e as Z,P as x,Q as ee,F as te,b as ne,f as ae,l as le}from"./B-NeRa6q.js";let T;const oe=(e,s,y,l,w,t)=>{var f,n;if(T=l,t=t.map(k=>k.split(":")[0]),t.includes("currency")&&w.length>=(y.maxLength==null?16:y.maxLength)&&l.preventDefault(),t.includes("phone")&&w.length>=(y.maxLength==null?15:y.maxLength)&&l.preventDefault(),(t.includes("numeric")||t.includes("currency"))&&(l.keyCode<48||l.keyCode>57)&&l.preventDefault(),t.includes("decimal")){const k=l.key,b=".";if(["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Enter"].includes(k))return;const r=k===b,d=/^[0-9]$/.test(k),m=l.target.value,S=r&&m.length===0,p=m.includes(b);!d&&!(r&&!S&&!(r&&p))&&l.preventDefault()}else t.includes("alphanumeric")?(l.keyCode<48||l.keyCode>57)&&(l.keyCode<65||l.keyCode>90)&&(l.keyCode<97||l.keyCode>122)&&l.keyCode!=32&&l.keyCode!=46&&l.preventDefault():t.includes("alpha")?(l.keyCode<65||l.keyCode>90)&&(l.keyCode<97||l.keyCode>122)&&l.keyCode!=32&&l.preventDefault():t.includes("phone")&&(l.keyCode<48||l.keyCode>57)&&l.keyCode!=43&&l.keyCode!=45&&l.preventDefault();l.keyCode==13&&((n=(f=e==null?void 0:e.vnode)==null?void 0:f.props)!=null&&n.onEnter)&&s("enter",w)},se=(e,s,y,l,w)=>{let t=y;e.forEach(f=>{const n=f.split(":");switch(n[0]){case"lower":t=t.toLowerCase();break;case"upper":t=t.toUpperCase();break;case"ucwords":t=v.ucwords(t);break;case"ucfirst":t=v.ucfirst(t);break;case"alpha":t=v.alpha(t);break;case"numeric":t=v.numeric(t).toString();break;case"alphanumeric":t=v.alphanumeric(t);break;case"currency":const b=n.length==1?",":n[1];t=v.currency(t,b),t.slice(0,1)=="0"&&t.length>1&&(t=t.substring(1));break;case"decimal":t=t.replace(/[^0-9.]/g,"");const r=t.indexOf(".");r!==-1&&(t=t.substring(0,r+1)+t.substring(r+1).replace(/\./g,"")),t.startsWith(".")&&(t=t.substring(1));const d=t.split(".");d[0]=d[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),d.length>1?t=d[0]+"."+d[1]:t=d[0];break;case"hashtag":{if(t.trim()=="")return;if((T==null?void 0:T.inputType)=="deleteContentBackward"&&t.slice(-1)=="#"){t=t.substring(0,t.length-2);return}if(t.slice(-1)=="#"){t=t.substring(0,t.length-1);return}t.replace(/#/g,"").includes(" ")?t=t.replace(/[#,]/g,"").split(" ").map(p=>p.length>0?"#"+p:p).join(" "):t="#"+t.replace(/#/g,"")}break}}),w(t)},ie=W({inheritAttrs:!1,emits:["update:modelValue","enter","blur","focus","suffix"],props:{modelValue:{default:"",type:[Number,String]},label:{type:String,default:null},hint:{type:String,default:null},type:{type:String,default:"text"},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},maxLength:{type:Number,default:null},prefix:{type:String,default:null},suffix:{type:Array,default:()=>[]},password:{type:Boolean,default:!1},minDate:{type:String,default:null},maxDate:{type:String,default:null},formatters:{type:String,default:""},mask:{type:String,default:null}},setup(e,{emit:s}){var K;const y=()=>e.password?"password":["range"].includes(e.type)?"text":e.type,t=((K=H().public.ui)==null?void 0:K.icon)=="tabler",f=t?"ti-eye":"hgi-view",n=t?"ti-eye-off":"hgi-view-off",k=J(),b=B(null),r=B(e.modelValue),d=B(y()),m=B(e.suffix),S=B(!0);let p=null;const q=a=>{r.value=a.target.value},A=()=>{let i=r.value.toString().split("/").join("/").indexOf("_");i!==-1&&setTimeout(()=>{p.setSelectionRange(i,i)},1)},E=a=>{e.mask&&e.mask.split(":")[0]=="date"&&A()},z=a=>{p=a.target,s("focus",a),e.mask&&A()},U=a=>{if(a!=null&&a._toggle){const o=m.value.findIndex(i=>i._toggle);S.value=!S.value,m.value[o]={icon:S.value?f:n,_toggle:!0}}s("suffix",a)},L=a=>{const o=m.value;if(d.value=a?"password":e.type,S.value=a,a){o.findIndex(g=>g._toggle)==-1&&m.value.push({icon:f,_toggle:!0});return}m.value=o.filter(i=>!i._toggle)},G=a=>{oe(k,s,e,a,r.value,e.formatters.split("|"))},N=()=>{const a=e.mask.split(":");let o="y/m/d",i={y:"____",d:"__",m:"__"};if(a.length>1){let c=a[1];const u=c.includes("d"),I=c.includes("m"),j=c.includes("y");u&&I&&j&&(o=a[1])}return o.split("/").map(c=>i[c]).join("/")},Q=(a,o)=>{const i=a.split("/"),g=o.split("/");let c=parseInt(i[g.indexOf("d")],10),u=parseInt(i[g.indexOf("m")],10);const I=parseInt(i[g.indexOf("y")],10);u=Math.min(Math.max(u,1),12);const j=new Date(I,u,0).getDate();return c=Math.min(Math.max(c,1),j),g.map(F=>{if(F==="d")return c.toString().padStart(2,"0");if(F==="m")return u.toString().padStart(2,"0");if(F==="y")return I.toString()}).join("/")},$=()=>{e.mask&&e.mask.split(":")[0]=="date"&&(r.value=N())},P=()=>{b.value&&setTimeout(()=>{b.value.focus()},10)};return D(()=>e.type,()=>{d.value=y()}),D(()=>e.password,a=>{L(a)}),D(()=>e.suffix,a=>{m.value=a,L(e.password)},{immediate:!0}),D(()=>e.modelValue,a=>{r.value=a}),D(()=>S.value,a=>{d.value=a?"password":"text"}),D(()=>r.value,a=>{if(e.mask){let o=N().split(""),i=_.numeric(a.toString()).toString(),g=0,c=i.length;for(let u=0;u<c;u++)o[u]==="/"&&c++;for(let u=0;u<o.length&&g<i.length;u++)o[u]==="_"&&(o[u]=i[g],g++);if(r.value=o.join(""),setTimeout(()=>{p==null||p.setSelectionRange(c,c)},5),!o.includes("_")){const u=e.mask.split(":");let I=u.length>1?u[1]:"y/m/d";s("update:modelValue",Q(r.value,I))}return}se(e.formatters.split("|"),s,a.toString(),e.type,o=>{s("update:modelValue",o)})}),D(()=>e.mask,()=>$()),D(()=>e.autofocus,()=>{e.autofocus&&P()}),Y(()=>{L(e.password),$(),d.value=y(),e.autofocus&&P()}),{utils:_,localValue:r,inputType:d,inputSuffix:m,input:b,onInput:q,onFocus:z,onMouseDown:E,onSuffix:U,onKeyPress:G,doFocus:P,isTabler:t}}}),ue={class:"input-icon"},re={key:0,class:"input-icon-addon"},de=["value","type","placeholder","maxlength","required","disabled","readonly","min","max","autofocus","icon"],ce={key:2,class:"suffix"},ye=["onClick"],me={key:0};function pe(e,s,y,l,w,t){const f=le;return h(),C("div",{class:V(["input",e.utils.on(e.disabled,"disabled")])},[e.label?(h(),C("label",{key:0,class:V(["form-label",e.utils.on(e.required,"required")])},O(e.label),3)):M("",!0),R("div",ue,[e.prefix?(h(),C("span",re,[Z(f,{icon:e.prefix,size:"input-prefix"},null,8,["icon"])])):M("",!0),["date"].includes(e.inputType)&&(e.localValue==""||e.localValue==null)?(h(),C("div",{key:1,class:V(["date-input-placeholders",e.utils.on(!["",null].includes(e.prefix),"has-prefix"),e.utils.on(e.disabled,"disabled")])}," ----/--/-- ",2)):M("",!0),R("input",{value:e.localValue,type:e.inputType,class:V(["form-control"]),placeholder:e.hint,maxlength:e.maxLength,required:e.required,disabled:e.disabled,readonly:"readonly"in e?e.readonly:x(ee),min:e.minDate,max:e.maxDate,autofocus:e.autofocus,name:"input",autocomplete:"off",onFocus:s[0]||(s[0]=(...n)=>e.onFocus&&e.onFocus(...n)),onInput:s[1]||(s[1]=(...n)=>e.onInput&&e.onInput(...n)),onKeypress:s[2]||(s[2]=(...n)=>e.onKeyPress&&e.onKeyPress(...n)),onMousedown:s[3]||(s[3]=(...n)=>e.onMouseDown&&e.onMouseDown(...n)),ref:"input",icon:e.isTabler?"tabler":"huge"},null,40,de),e.inputSuffix.length!=0&&!["date"].includes(e.type)?(h(),C("div",ce,[(h(!0),C(te,null,ne(e.inputSuffix,(n,k)=>(h(),C("span",{key:k,class:V([e.utils.on(n.disabled,"disabled")]),onClick:b=>e.onSuffix(n)},[n!=null&&n.kbd&&(n!=null&&n.text)?(h(),C("kbd",me,O(n.text),1)):n!=null&&n.text?(h(),C("span",{key:1,class:V(n==null?void 0:n.class)},O(n.text),3)):n!=null&&n.icon&&!(n!=null&&n.text)?(h(),ae(f,{key:2,icon:n==null?void 0:n.icon},null,8,["icon"])):M("",!0)],10,ye))),128))])):M("",!0)])],2)}const ke=X(ie,[["render",pe],["__scopeId","data-v-d23c1d99"]]);export{ke as _,se as f,oe as h};
