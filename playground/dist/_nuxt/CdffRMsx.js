import{r as k,o as D,J as u,T,A as E,_ as N,a as t,c as r,d as i,n as f,p as z,m as y,t as O,F as x,b as V,w as F,e as A,l as I,j,i as q}from"./DNDMXCnN.js";import{_ as J}from"./Nq-7FOXf.js";const L={inheritAttrs:!1,emits:["init","onClose"],props:{id:{type:String,required:!0},size:{type:String,default:"md"},elevation:{type:Boolean,default:!0},icon:{type:String,default:null},actions:{type:Array,default:[]},headerless:{type:Boolean,default:!1}},setup(d,{emit:C}){const l=k(!1),e=k(!1),b=k(!1),h=k("");let a;const p=async n=>{var c,B;if(await E(),d.id==n.id){e.value=!0;const S=typeof(n==null?void 0:n.params)=="string";h.value=S?n==null?void 0:n.params:((c=n==null?void 0:n.params)==null?void 0:c.title)??"Untitled",a=S?null:((B=n==null?void 0:n.params)==null?void 0:B.callback)??null,setTimeout(()=>{var _;l.value=!0,C("init",{title:h.value,data:S?{}:(_=n==null?void 0:n.params)==null?void 0:_.data})},1),document.body.style.overflow="hidden",document.onkeydown=_=>{(_.key=="Escape"||_.key=="Esc"&&l.value)&&(_.preventDefault(),T.close(d.id))}}},o=n=>{b.value=n.show},s=n=>{n.id==d.id&&(l.value=!1,setTimeout(()=>{e.value=!1},250),document.onkeydown=()=>{},document.body.style.overflow="auto")},v=n=>{n.id===d.id&&(h.value=n.title)},w=n=>{n.id===d.id&&(a==null||a.call(this,n.data))};return D(()=>{u.on("__show_modal",p),u.on("__show_modal2",p),u.on("__close_modal",s),u.on("__set_modal_title",v),u.on("__callback_modal",w),u.on("__show_confirm",o)}),{modal:T,preShow:e,show:l,title:h,onClose:s,isConfirmOpen:b}}},M={class:"modal-content"},P={class:"modal-title text-truncate"},U={class:"modal-action"},G=["icon-tooltip"],H=["icon-tooltip","onClick"];function K(d,C,l,e,b,h){const a=q,p=J;return t(),r(x,null,[i("div",{class:f(["modal fade",{show:e.show&&!e.isConfirmOpen}]),tabindex:"-1",style:j({display:e.preShow?"block":"none"})},[i("div",{class:f(["modal-dialog modal-dialog-centered",`modal-${l.size}`]),role:"document"},[i("div",M,[l.headerless?y("",!0):(t(),r("div",{key:0,class:f(["modal-header bg-white",{"border-0":!l.elevation}])},[l.icon?(t(),z(a,{key:0,icon:`${l.icon} fix-1 me-2`},null,8,["icon"])):y("",!0),i("h5",P,O(e.title),1),i("div",U,[i("ul",null,[(t(!0),r(x,null,V([...l.actions,{icon:"hgi-cancel-01",type:"close"}],(o,s)=>{var v,w;return t(),r(x,null,[((v=o==null?void 0:o.options)==null?void 0:v.length)>0&&((o==null?void 0:o.visible)??!0)?(t(),z(p,{key:s,placement:"end",options:o==null?void 0:o.options,onSelect:n=>{var c;return(c=o==null?void 0:o.click)==null?void 0:c.call(null,{...n,index:s})}},{default:F(()=>[i("li",{"icon-tooltip":o==null?void 0:o.tooltip,class:f([o!=null&&o.disabled?"disabled opacity-50":""])},[A(a,{icon:o==null?void 0:o.icon},null,8,["icon"])],10,G)]),_:2},1032,["options","onSelect"])):y("",!0),((o==null?void 0:o.visible)??!0)&&!((w=o==null?void 0:o.options)!=null&&w.length)?(t(),r("li",{key:s,"icon-tooltip":o==null?void 0:o.tooltip,class:f([o!=null&&o.disabled?"disabled opacity-50":""]),onClick:n=>{var c;return(o==null?void 0:o.type)=="close"?e.modal.close(l.id):(c=o==null?void 0:o.click)==null?void 0:c.call(null,{...o,index:s})}},[A(a,{icon:o==null?void 0:o.icon},null,8,["icon"])],10,H)):y("",!0)],64)}),256))])])],2)),I(d.$slots,"default",{},void 0,!0)])],2)],6),e.preShow?(t(),r("div",{key:0,class:f(["modal-backdrop fade",{show:e.show&&!e.isConfirmOpen}])},null,2)):y("",!0)],64)}const W=N(L,[["render",K],["__scopeId","data-v-58ede096"]]);export{W as _};
