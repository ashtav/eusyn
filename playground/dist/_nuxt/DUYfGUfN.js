import{P as I,z as G,r as M,k as D,u as R,o as H,M as J,A as X,_ as Z,a as k,c as b,n as B,t as T,m as V,d as z,e as x,Q as ee,R as te,F as ne,b as le,p as ae,i as oe}from"./Bnil-BId.js";let L;const se=(e,o,p,a,w,t)=>{var h,n;if(L=a,t=t.map(y=>y.split(":")[0]),t.includes("currency")&&w.length>=(p.maxLength==null?16:p.maxLength)&&a.preventDefault(),t.includes("phone")&&w.length>=(p.maxLength==null?15:p.maxLength)&&a.preventDefault(),(t.includes("numeric")||t.includes("currency"))&&(a.keyCode<48||a.keyCode>57)&&a.preventDefault(),t.includes("decimal")){const y=a.key,C=".";if(["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Enter"].includes(y))return;const r=y===C,d=/^[0-9]$/.test(y),m=a.target.value,S=r&&m.length===0,g=m.includes(C);!d&&!(r&&!S&&!(r&&g))&&a.preventDefault()}else t.includes("alphanumeric")?(a.keyCode<48||a.keyCode>57)&&(a.keyCode<65||a.keyCode>90)&&(a.keyCode<97||a.keyCode>122)&&a.keyCode!=32&&a.keyCode!=46&&a.preventDefault():t.includes("alpha")?(a.keyCode<65||a.keyCode>90)&&(a.keyCode<97||a.keyCode>122)&&a.keyCode!=32&&a.preventDefault():t.includes("phone")&&(a.keyCode<48||a.keyCode>57)&&a.keyCode!=43&&a.keyCode!=45&&a.preventDefault();a.keyCode==13&&((n=(h=e==null?void 0:e.vnode)==null?void 0:h.props)!=null&&n.onEnter)&&o("enter",w)},ie=(e,o,p,a,w)=>{let t=p;e.forEach(h=>{const n=h.split(":");switch(n[0]){case"lower":t=t.toLowerCase();break;case"upper":t=t.toUpperCase();break;case"ucwords":t=I.ucwords(t);break;case"ucfirst":t=I.ucfirst(t);break;case"alpha":t=I.alpha(t);break;case"numeric":t=I.numeric(t).toString();break;case"alphanumeric":t=I.alphanumeric(t);break;case"currency":const C=n.length==1?",":n[1];t=I.currency(t,C),t.slice(0,1)=="0"&&t.length>1&&(t=t.substring(1));break;case"decimal":t=t.replace(/[^0-9.]/g,"");const r=t.indexOf(".");r!==-1&&(t=t.substring(0,r+1)+t.substring(r+1).replace(/\./g,"")),t.startsWith(".")&&(t=t.substring(1));const d=t.split(".");d[0]=d[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),d.length>1?t=d[0]+"."+d[1]:t=d[0];break;case"hashtag":{if(t.trim()=="")return;if((L==null?void 0:L.inputType)=="deleteContentBackward"&&t.slice(-1)=="#"){t=t.substring(0,t.length-2);return}if(t.slice(-1)=="#"){t=t.substring(0,t.length-1);return}t.replace(/#/g,"").includes(" ")?t=t.replace(/[#,]/g,"").split(" ").map(g=>g.length>0?"#"+g:g).join(" "):t="#"+t.replace(/#/g,"")}break}}),w(t)},ue=G({inheritAttrs:!1,emits:["update:modelValue","enter","focus","suffix","event"],props:{modelValue:{default:"",type:[Number,String]},label:{type:String,default:null},hint:{type:String,default:null},type:{type:String,default:"text"},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},maxLength:{type:Number,default:null},prefix:{type:String,default:null},suffix:{type:Array,default:()=>[]},password:{type:Boolean,default:!1},minDate:{type:String,default:null},maxDate:{type:String,default:null},formatters:{type:String,default:""},mask:{type:String,default:null}},setup(e,{emit:o}){var K;const p=()=>e.password?"password":["range"].includes(e.type)?"text":e.type,t=((K=J().public.ui)==null?void 0:K.icon)=="tabler",h=t?"ti-eye":"hgi-view",n=t?"ti-eye-off":"hgi-view-off",y=X(),C=M(null),r=M(e.modelValue),d=M(p()),m=M(e.suffix),S=M(!0);let g=null;const A=l=>{r.value=l.target.value},N=()=>{let i=r.value.toString().split("/").join("/").indexOf("_");i!==-1&&setTimeout(()=>{g.setSelectionRange(i,i)},1)},E=l=>{e.mask&&e.mask.split(":")[0]=="date"&&N()},U=l=>{g=l.target,o("focus",!0),e.mask&&N()},Q=l=>{!y||y.isUnmounted||o("focus",!1)},W=l=>{if(l!=null&&l._toggle){const s=m.value.findIndex(i=>i._toggle);S.value=!S.value,m.value[s]={icon:S.value?h:n,_toggle:!0}}o("suffix",l)},P=l=>{const s=m.value;if(d.value=l?"password":e.type,S.value=l,l){s.findIndex(f=>f._toggle)==-1&&m.value.push({icon:h,_toggle:!0});return}m.value=s.filter(i=>!i._toggle)},Y=l=>{se(y,o,e,l,r.value,e.formatters.split("|"))},O=()=>{const l=e.mask.split(":");let s="y/m/d",i={y:"____",d:"__",m:"__"};if(l.length>1){let c=l[1];const u=c.includes("d"),v=c.includes("m"),j=c.includes("y");u&&v&&j&&(s=l[1])}return s.split("/").map(c=>i[c]).join("/")},_=(l,s)=>{const i=l.split("/"),f=s.split("/");let c=parseInt(i[f.indexOf("d")],10),u=parseInt(i[f.indexOf("m")],10);const v=parseInt(i[f.indexOf("y")],10);u=Math.min(Math.max(u,1),12);const j=new Date(v,u,0).getDate();return c=Math.min(Math.max(c,1),j),f.map(q=>{if(q==="d")return c.toString().padStart(2,"0");if(q==="m")return u.toString().padStart(2,"0");if(q==="y")return v.toString()}).join("/")},$=()=>{e.mask&&e.mask.split(":")[0]=="date"&&(r.value=O())},F=()=>{C.value&&setTimeout(()=>{C.value.focus()},10)};return D(()=>e.type,()=>{d.value=p()}),D(()=>e.password,l=>{P(l)}),D(()=>e.suffix,l=>{m.value=l,P(e.password)},{immediate:!0}),D(()=>e.modelValue,l=>{r.value=l}),D(()=>S.value,l=>{d.value=l?"password":"text"}),D(()=>r.value,l=>{if(e.mask){let s=O().split(""),i=R.numeric(l.toString()).toString(),f=0,c=i.length;for(let u=0;u<c;u++)s[u]==="/"&&c++;for(let u=0;u<s.length&&f<i.length;u++)s[u]==="_"&&(s[u]=i[f],f++);if(r.value=s.join(""),setTimeout(()=>{g==null||g.setSelectionRange(c,c)},5),!s.includes("_")){const u=e.mask.split(":");let v=u.length>1?u[1]:"y/m/d";o("update:modelValue",_(r.value,v))}return}ie(e.formatters.split("|"),o,l.toString(),e.type,s=>{o("update:modelValue",s)})}),D(()=>e.mask,()=>$()),D(()=>e.autofocus,()=>{e.autofocus&&F()}),H(()=>{P(e.password),$(),d.value=p(),e.autofocus&&F()}),{utils:R,localValue:r,inputType:d,inputSuffix:m,input:C,onInput:A,onFocus:U,onBlur:Q,onMouseDown:E,onSuffix:W,onKeyPress:Y,doFocus:F,isTabler:t}}}),re={class:"input-icon"},de={key:0,class:"input-icon-addon"},ce=["value","type","placeholder","maxlength","required","disabled","readonly","min","max","autofocus","icon"],ye={key:2,class:"suffix"},pe=["onClick"],me={key:0},ge={key:3,class:"tooltip"};function fe(e,o,p,a,w,t){const h=oe;return k(),b("div",{class:B(["input",e.utils.on(e.disabled,"disabled")])},[e.label?(k(),b("label",{key:0,class:B(["form-label",e.utils.on(e.required,"required")])},T(e.label),3)):V("",!0),z("div",re,[e.prefix?(k(),b("span",de,[x(h,{icon:e.prefix,size:"input-prefix"},null,8,["icon"])])):V("",!0),["date"].includes(e.inputType)&&(e.localValue==""||e.localValue==null)?(k(),b("div",{key:1,class:B(["date-input-placeholders",e.utils.on(!["",null].includes(e.prefix),"has-prefix"),e.utils.on(e.disabled,"disabled")])}," ----/--/-- ",2)):V("",!0),z("input",{value:e.localValue,type:e.inputType,class:B(["form-control"]),placeholder:e.hint,maxlength:e.maxLength,required:e.required,disabled:e.disabled,readonly:"readonly"in e?e.readonly:ee(te),min:e.minDate,max:e.maxDate,autofocus:e.autofocus,name:"input",autocomplete:"off",onFocus:o[0]||(o[0]=(...n)=>e.onFocus&&e.onFocus(...n)),onBlur:o[1]||(o[1]=(...n)=>e.onBlur&&e.onBlur(...n)),onInput:o[2]||(o[2]=(...n)=>e.onInput&&e.onInput(...n)),onKeypress:o[3]||(o[3]=(...n)=>e.onKeyPress&&e.onKeyPress(...n)),onMousedown:o[4]||(o[4]=(...n)=>e.onMouseDown&&e.onMouseDown(...n)),ref:"input",icon:e.isTabler?"tabler":"huge"},null,40,ce),e.inputSuffix.length!=0&&!["date"].includes(e.type)?(k(),b("div",ye,[(k(!0),b(ne,null,le(e.inputSuffix,(n,y)=>(k(),b("span",{key:y,class:B(["suffix-item",e.utils.on(n.disabled,"disabled")]),onClick:C=>e.onSuffix(n)},[n!=null&&n.kbd&&(n!=null&&n.text)?(k(),b("kbd",me,T(n.text),1)):n!=null&&n.text?(k(),b("span",{key:1,class:B(n==null?void 0:n.class)},T(n.text),3)):n!=null&&n.icon&&!(n!=null&&n.text)?(k(),ae(h,{key:2,icon:n==null?void 0:n.icon},null,8,["icon"])):V("",!0),n.tooltip?(k(),b("span",ge,T(n.tooltip),1)):V("",!0)],10,pe))),128))])):V("",!0)])],2)}const be=Z(ue,[["render",fe]]);export{be as _,ie as f,se as h};
